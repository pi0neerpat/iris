datasource DS {
  // optionally set multiple providers
  // example: provider = ["sqlite", "postgresql"]
  provider = ["sqlite", "postgresql"]
  url      = env("DATABASE_URL" )
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = "native"
}

model AuthDetail {
  id        String   @id @default(uuid())
  nonce     String
  timestamp DateTime @default(now())
}

model Hero {
  id    String  @id @id @default(uuid())
  address String
  authDetail AuthDetail

}

model Trigger {
  id String @id @default(uuid())
  quest Quest?
}

model Quest {
  id String @id @default(uuid())
  merchant Merchant @relation(name: "merchantQuests")
  transactions Transaction[] @relation(name: "questTransactions")
  trigger Trigger
}

model Merchant {
  quests Quest[] @relation(name: "merchantQuests")
}

model Transaction {
  id String @id
  quest Quest
  timestamp DateTime
  blockNumber String
  quest Quest @relation(name: "questTransactions")
  hero Hero @relation(name: "heroTransactions")
}
